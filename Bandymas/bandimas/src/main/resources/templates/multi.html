<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Hello Spring Security</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="/css/main.css" th:href="@{/css/main.css}" />
</head>
<body>


<form action="#" th:action="@{/fooform}" th:object="${command}" method="post">


    <div id="movieList">
        <div class="row">
            <div class="col form-group">title</div>

            <!--class="col form-group"-->

    <ul>
        <li class="row item" th:each="checkboxValue: ${multiCheckboxAllValues}">
            <input type="checkbox"

                   th:field="*{multiCheckboxSelectedValues}"


                   th:value="${checkboxValue}" />
            <label
                    th:for="${#ids.prev('multiCheckboxSelectedValues')}"
                    th:text="${checkboxValue}" name="checkboxValue" class="form-control"  ></label>
        </li>
    </ul>

            </div>
    </div>

    <div class="row">
        <div class="col">
            <button type="button" class="btn btn-success" onclick="addRow()">Add row</button>
        </div>
    </div>

    <input type="submit" value="Update" />
</form>

<script>
let addRow = function () {
        let listName = 'movies'; //list name in Catalog.class
        let fieldsNames = [ 'title']; //field names from Movie.class
        let rowIndex = document.querySelectorAll('.item').length; //we can add mock class to each movie-row

        let row = document.createElement('div');
        row.classList.add('row', 'item');

        fieldsNames.forEach((fieldName) => {
            let col = document.createElement('div');
            col.classList.add('col', 'form-group');
            if (fieldName === 'id') {
                col.classList.add('d-none'); //field with id - hidden
            }

            let input = document.createElement('input');
            input.type = 'text';
            input.classList.add('form-control');
            input.id = listName + rowIndex + '.' + fieldName;
            input.setAttribute('name', listName + '[' + rowIndex + '].' + fieldName);

            col.appendChild(input);
            row.appendChild(col);
        });

        document.getElementById('movieList').appendChild(row);
};
</script>


<!--<ul>-->
    <!--<li th:each="checkboxValue: ${multiCheckboxAllValues}">-->
        <!--<input type="checkbox"-->
               <!--th:field="*{multiCheckboxSelectedValues}"-->
               <!--th:value="${checkboxValue}" />-->
        <!--<label-->
                <!--th:for="${#ids.prev('multiCheckboxSelectedValues')}"-->
                <!--th:text="${checkboxValue}" name="checkboxValue"  ></label>-->
    <!--</li>-->
<!--</ul>-->

</body>
</html>